<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/rag" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Basic RAG tutorial with templates | SuperDuperDB documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.superduperdb.com/docs/tutorials/rag"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://docs.superduperdb.com/img/superDuperDB_img.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Basic RAG tutorial with templates | SuperDuperDB documentation"><meta data-rh="true" name="description" content="In this tutorial we show you how to do retrieval augmented generation (RAG) with superduperdb."><meta data-rh="true" property="og:description" content="In this tutorial we show you how to do retrieval augmented generation (RAG) with superduperdb."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.superduperdb.com/docs/tutorials/rag"><link data-rh="true" rel="alternate" href="https://docs.superduperdb.com/docs/tutorials/rag" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.superduperdb.com/docs/tutorials/rag" hreflang="x-default"><script id="gtm-script_1" strategy="lazyOnload">!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5BXCZJTF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<script id="gtag-config" strategy="lazyOnload">function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q97F3ZHCQD")</script>
<script>!function(e){if(!window.ko){window.ko=[],["identify","track","removeListeners","open","on","off","qualify","ready"].forEach((function(e){ko[e]=function(){var n=[].slice.call(arguments);return n.unshift(e),ko.push(n),ko}}));var n=document.createElement("script");n.async=!0,n.setAttribute("src","https://cdn.getkoala.com/v1/pk_92927e86e628c69d1ec3b7b4e887e6997bab/sdk.js"),(document.body||document.head).appendChild(n)}}()</script>
<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BXCZJTF" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
<script src="https://main.d1eg28j9pwrt0l.amplifyapp.com/widget.js" id="my-api" data-api-key="superduperdb" async></script>
<script src="https://tag.clearbitscripts.com/v1/pk_0beed107418c6889a934fd8a58e1054e/tags.js" referrerpolicy="strict-origin-when-cross-origin" async></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-Q97F3ZHCQD" strategy="lazyOnload" id="gtag-script_2" async></script><link rel="stylesheet" href="/assets/css/styles.3a532f95.css">
<script src="/assets/js/runtime~main.ec835e24.js" defer="defer"></script>
<script src="/assets/js/main.19cd75f0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#7628f8;color:#fff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ðŸ”® We officially released v0.1 on Github! ðŸ”®</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://superduperdb.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/SuperDuperDB_logo_color_dark_noborder.svg" alt="SuperDuperDB" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/SuperDuperDB_logo_color.svg" alt="SuperDuperDB" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/category/use-cases/">Use Cases</a><a class="navbar__item navbar__link" href="/docs/category/api/">API</a><a href="https://blog.superduperdb.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/SuperDuperDB/superduper-community-apps/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community Apps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.question-the-docs.superduperdb.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ask our docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SuperDuperDB/superduperdb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/get_started/first_steps">Get started</a><button aria-label="Expand sidebar category &#x27;Get started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/tutorials/intro">Tutorials</a><button aria-label="Collapse sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/vector_search">Vector search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/listening">Listening for new data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/rag">Basic RAG tutorial with templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/training">Training and Managing MNIST Predictions with SuperDuperDB</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/core_api/intro">Core API</a><button aria-label="Expand sidebar category &#x27;Core API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/apply_api/component">Apply API</a><button aria-label="Expand sidebar category &#x27;Apply API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/execute_api/overview">Execute API</a><button aria-label="Expand sidebar category &#x27;Execute API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/models/overview">Models</a><button aria-label="Expand sidebar category &#x27;Models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/reusable-snippets">Reusable snippets</a><button aria-label="Expand sidebar category &#x27;Reusable snippets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/data_integrations/intro">Data integrations</a><button aria-label="Collapse sidebar category &#x27;Data integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/mongodb">MongoDB</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/data_integrations/sql">SQL Databases</a><button aria-label="Collapse sidebar category &#x27;SQL Databases&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/postgresql">PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/snowflake">Snowflake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/sqlite">SQLite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/duckdb">DuckDB</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data_integrations/pandas">Pandas</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/ai-integrations">AI integrations</a><button aria-label="Collapse sidebar category &#x27;AI integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/anthropic">Anthropic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/cohere">Cohere</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/custom">Custom Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/jina">Jina</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/llama_cpp">Llama.cpp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/openai">OpenAI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/pytorch">PyTorch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/sentence_transformers">Sentence-Transformers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/sklearn">Scikit-learn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/transformers">Transformers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai_integrations/vllm">vLLM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/fundamentals/overview">Fundamentals</a><button aria-label="Expand sidebar category &#x27;Fundamentals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/production/overview">Production features</a><button aria-label="Expand sidebar category &#x27;Production features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/use-cases">Use cases</a><button aria-label="Expand sidebar category &#x27;Use cases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://raw.githubusercontent.com/SuperDuperDB/superduperdb/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/tutorials/intro"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Basic RAG tutorial with templates</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>Basic RAG tutorial with templates</h1>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In this tutorial we show you how to do retrieval augmented generation (RAG) with <code>superduperdb</code>.
Note that this is just an example of the flexibility and power which <code>superduperdb</code> gives
to developers. <code>superduperdb</code> is about much more than RAG and LLMs.</p></div></div>
<p>As in the vector-search tutorial we&#x27;ll use <code>superduperdb</code> documentation for the tutorial.
We&#x27;ll add this to a testing database by downloading the data snapshot:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!curl </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">O https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">//</span><span class="token plain">superduperdb</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">public</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">amazonaws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> superduper</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Document</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> superduper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;mongomock://test&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;text.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;docu&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">insert_many</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;txt&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> r </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Outputs</summary><div><div class="collapsibleContent_i85q"><pre><p>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
Dload  Upload   Total   Spent    Left  Speed
100  479k  100  479k    0     0   501k      0 --:--:-- --:--:-- --:--:--  504k
2024-Jun-02 14:23:40.34| INFO     | Duncans-MBP.fritz.box| superduperdb.base.build:69   | Data Client is ready. mongomock.MongoClient(&#x27;localhost&#x27;, 27017)
2024-Jun-02 14:23:40.35| INFO     | Duncans-MBP.fritz.box| superduperdb.base.build:42   | Connecting to Metadata Client with engine:  mongomock.MongoClient(&#x27;localhost&#x27;, 27017)
2024-Jun-02 14:23:40.36| INFO     | Duncans-MBP.fritz.box| superduperdb.base.build:155  | Connecting to compute client: None
2024-Jun-02 14:23:40.36| INFO     | Duncans-MBP.fritz.box| superduperdb.base.datalayer:85   | Building Data Layer
2024-Jun-02 14:23:40.36| INFO     | Duncans-MBP.fritz.box| superduperdb.base.build:220  | Configuration:
+---------------+------------------+
| Configuration |      Value       |
+---------------+------------------+
|  Data Backend | mongomock://test |
+---------------+------------------+
2024-Jun-02 14:23:40.37| INFO     | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:37   | Submitting job. function:&lt;function callable_job at 0x11e98dda0&gt;
2024-Jun-02 14:23:40.38| SUCCESS  | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:43   | Job submitted on &lt;superduperdb.backends.local.compute.LocalComputeBackend object at 0x2a8ed7050&gt;.  function:&lt;function callable_job at 0x11e98dda0&gt; future<!-- -->:ebe43b87-1388-4247-8502-ed2da8659ecd</p></pre></div></div></details>
<p>Let&#x27;s verify the data in the <code>db</code> by querying one datapoint:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;docu&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Outputs</summary><div><div class="collapsibleContent_i85q"><pre><p>Document({&#x27;txt&#x27;: &quot;---\nsidebar_position: 5\n---\n\n# Encoding data\n\nIn AI, typical types of data are:\n\n- <strong>Numbers</strong> (integers, floats, etc.)\n- <strong>Text</strong>\n- <strong>Images</strong>\n- <strong>Audio</strong>\n- <strong>Videos</strong>\n- <strong>...bespoke in house data</strong>\n\nMost databases don&#x27;t support any data other than numbers and text.\nSuperDuperDB enables the use of these more interesting data-types using the <code>Document</code> wrapper.\n\n### <code>Document</code>\n\nThe <code>Document</code> wrapper, wraps dictionaries, and is the container which is used whenever \ndata is exchanged with your database. That means inputs, and queries, wrap dictionaries \nused with <code>Document</code> and also results are returned wrapped with <code>Document</code>.\n\nWhenever the <code>Document</code> contains data which is in need of specialized serialization,\nthen the <code>Document</code> instance contains calls to <code>DataType</code> instances.\n\n### <code>DataType</code>\n\nThe <a href="/docs/apply_api/datatype"><code>DataType</code> class</a>, allows users to create and encoder custom datatypes, by providing \ntheir own encoder/decoder pairs.\n\nHere is an example of applying an <code>DataType</code> to add an image to a <code>Document</code>:\n\n<code>python\nimport pickle\nimport PIL.Image\nfrom superduperdb import DataType, Document\n\nimage = PIL.Image.open(&#x27;my_image.jpg&#x27;)\n\nmy_image_encoder = DataType(\n    identifier=&#x27;my-pil&#x27;,\n    encoder=lambda x: pickle.dumps(x),\n    decoder=lambda x: pickle.loads(x),\n)\n\ndocument = Document(\{&#x27;img&#x27;: my_image_encoder(image)\})\n</code>\n\nThe bare-bones dictionary may be exposed with <code>.unpack()</code>:\n\n<code>python\n\&gt;\&gt;\&gt; document.unpack()\n\{&#x27;img&#x27;: \&lt;PIL.PngImagePlugin.PngImageFile image mode=P size=400x300\&gt;\}\n</code>\n\nBy default, data encoded with <code>DataType</code> is saved in the database, but developers \nmay alternatively save data in the <code>db.artifact_store</code> instead. \n\nThis may be achiever by specifying the <code>encodable=...</code> parameter:\n\n<code>python\nmy_image_encoder = DataType(\n    identifier=&#x27;my-pil&#x27;,\n    encoder=lambda x: pickle.dumps(x),\n    decoder=lambda x: pickle.loads(x),\n    encodable=&#x27;artifact&#x27;,    # saves to disk/ db.artifact_store\n    # encodable=&#x27;lazy_artifact&#x27;, # Just in time loading\n)\n</code>\n\nThe <code>encodable</code> specifies the type of the output of the <code>__call__</code> method, \nwhich will be a subclass of <code>superduperdb.components.datatype._BaseEncodable</code>.\nThese encodables become leaves in the tree defines by a <code>Document</code>.\n\n### <code>Schema</code>\n\nA <code>Schema</code> allows developers to connect named fields of dictionaries \nor columns of <code>pandas.DataFrame</code> objects with <code>DataType</code> instances.\n\nA <code>Schema</code> is used, in particular, for SQL databases/ tables, and for \nmodels that return multiple outputs.\n\nHere is an example <code>Schema</code>, which is used together with text and image \nfields:\n\n<code>python\ns = Schema(&#x27;my-schema&#x27;, fields=\{&#x27;my-text&#x27;: &#x27;str&#x27;, &#x27;my-image&#x27;: my_image_encoder\})\n</code>\n&quot;, &#x27;_fold&#x27;: &#x27;train&#x27;, &#x27;_id&#x27;: ObjectId(&#x27;665c644c53dcb972da5a9928&#x27;)})</p></pre></div></div></details>
<p>The first step in a RAG application is to create a <code>VectorIndex</code>. The results of searching
with this index will be used as input to the LLM for answering questions.</p>
<p>Read about <code>VectorIndex</code> <a href="/docs/apply_api/vector_index">here</a> and follow along the tutorial on
vector-search <a href="/docs/tutorials/vector_search">here</a>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> requests </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Stack</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Document</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VectorIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Listener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sentence_transformers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SentenceTransformer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">code </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tolist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datatype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shape</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">384</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> identifier</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;my-vec&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SentenceTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identifier</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;my-embedding&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datatype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">datatype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    predict_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;show_progress_bar&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signature</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;*args,**kwargs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;all-MiniLM-L6-v2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    device</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;cpu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postprocess</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">postprocess</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listener </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Listener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identifier</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;my-listener&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    select</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;docu&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    predict_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;max_chunk_size&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vector_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VectorIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identifier</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;my-index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    indexing_listener</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">listener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measure</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;cosine&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vector_index</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Outputs</summary><div><div class="collapsibleContent_i85q"><pre><p>from superduperdb import code</p><p>@code
def postprocess(x):
return x.tolist()</p></pre><pre><p>/Users/dodo/.pyenv/versions/3.11.7/envs/superduperdb-3.11/lib/python3.11/site-packages/huggingface_hub/file_download.py:1132: FutureWarning: <code>resume_download</code> is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use <code>force_download=True</code>.
warnings.warn(
/Users/dodo/.pyenv/versions/3.11.7/envs/superduperdb-3.11/lib/python3.11/site-packages/huggingface_hub/file_download.py:1132: FutureWarning: <code>resume_download</code> is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use <code>force_download=True</code>.
warnings.warn(</p></pre><pre><p>2024-Jun-02 14:23:58.41| INFO     | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:37   | Submitting job. function:&lt;function method_job at 0x11e98de40&gt;</p></pre><pre><p>204it [00:00, 149744.14it/s]</p></pre><pre><p>2024-Jun-02 14:23:59.54| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:752  | Computing chunk 0/4</p></pre><pre></pre><pre><p>Batches:   0%|          | 0/2 [00:00&lt;?, ?it/s]</p></pre><pre><p>2024-Jun-02 14:24:00.55| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:776  | Adding 50 model outputs to <code>db</code>
2024-Jun-02 14:24:00.58| WARNING  | Duncans-MBP.fritz.box| superduperdb.backends.mongodb.query:316  | Some delete ids are not executed , hence halting execution Please note the partially executed operations wont trigger any <code>model/listeners</code> unless CDC is active.
2024-Jun-02 14:24:00.58| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:752  | Computing chunk 1/4</p></pre><pre><p>Batches:   0%|          | 0/2 [00:00&lt;?, ?it/s]</p></pre><pre><p>2024-Jun-02 14:24:01.40| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:776  | Adding 50 model outputs to <code>db</code>
2024-Jun-02 14:24:01.43| WARNING  | Duncans-MBP.fritz.box| superduperdb.backends.mongodb.query:316  | Some delete ids are not executed , hence halting execution Please note the partially executed operations wont trigger any <code>model/listeners</code> unless CDC is active.
2024-Jun-02 14:24:01.43| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:752  | Computing chunk 2/4</p></pre><pre><p>Batches:   0%|          | 0/2 [00:00&lt;?, ?it/s]</p></pre><pre><p>2024-Jun-02 14:24:02.28| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:776  | Adding 50 model outputs to <code>db</code>
2024-Jun-02 14:24:02.30| WARNING  | Duncans-MBP.fritz.box| superduperdb.backends.mongodb.query:316  | Some delete ids are not executed , hence halting execution Please note the partially executed operations wont trigger any <code>model/listeners</code> unless CDC is active.
2024-Jun-02 14:24:02.30| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:752  | Computing chunk 3/4</p></pre><pre><p>Batches:   0%|          | 0/2 [00:00&lt;?, ?it/s]</p></pre><pre><p>2024-Jun-02 14:24:03.13| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:776  | Adding 50 model outputs to <code>db</code>
2024-Jun-02 14:24:03.16| WARNING  | Duncans-MBP.fritz.box| superduperdb.backends.mongodb.query:316  | Some delete ids are not executed , hence halting execution Please note the partially executed operations wont trigger any <code>model/listeners</code> unless CDC is active.
2024-Jun-02 14:24:03.16| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:752  | Computing chunk 4/4</p></pre><pre><p>Batches:   0%|          | 0/1 [00:00&lt;?, ?it/s]</p></pre><pre><p>2024-Jun-02 14:24:03.26| INFO     | Duncans-MBP.fritz.box| superduperdb.components.model:776  | Adding 4 model outputs to <code>db</code>
2024-Jun-02 14:24:03.26| WARNING  | Duncans-MBP.fritz.box| superduperdb.backends.mongodb.query:316  | Some delete ids are not executed , hence halting execution Please note the partially executed operations wont trigger any <code>model/listeners</code> unless CDC is active.
2024-Jun-02 14:24:03.26| SUCCESS  | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:43   | Job submitted on &lt;superduperdb.backends.local.compute.LocalComputeBackend object at 0x2a8ed7050&gt;.  function:&lt;function method_job at 0x11e98de40&gt; future<!-- -->:ac399012-8213-481a-b537-3d187fb69583<!-- -->
2024-Jun-02 14:24:03.26| INFO     | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:37   | Submitting job. function:&lt;function callable_job at 0x11e98dda0&gt;
2024-Jun-02 14:24:04.56| INFO     | Duncans-MBP.fritz.box| superduperdb.base.datalayer:169  | Loading vectors of vector-index: &#x27;my-index&#x27;
2024-Jun-02 14:24:04.56| INFO     | Duncans-MBP.fritz.box| superduperdb.base.datalayer:179  | docu.find(documents[0], documents[1])</p></pre><pre><p>Loading vectors into vector-table...: 204it [00:00, 3031.62it/s]</p></pre><pre><p>2024-Jun-02 14:24:04.63| SUCCESS  | Duncans-MBP.fritz.box| superduperdb.backends.local.compute:43   | Job submitted on &lt;superduperdb.backends.local.compute.LocalComputeBackend object at 0x2a8ed7050&gt;.  function:&lt;function callable_job at 0x11e98dda0&gt; future:41ae1218-3899-4588-bef6-481acee98e25</p></pre><pre></pre><pre><p>([&lt;superduperdb.jobs.job.ComponentJob at 0x2dfe3a810&gt;,
&lt;superduperdb.jobs.job.FunctionJob at 0x2acd55dd0&gt;],
VectorIndex(identifier=&#x27;my-index&#x27;, uuid=&#x27;7cb9de9f-4cc8-4944-a297-f6a433c51d19&#x27;, indexing_listener=Listener(identifier=&#x27;my-listener&#x27;, uuid=&#x27;81ea6d64-21f0-4552-b234-1bcf8094c35f&#x27;, key=&#x27;txt&#x27;, model=SentenceTransformer(preferred_devices=(&#x27;cuda&#x27;, &#x27;mps&#x27;, &#x27;cpu&#x27;), device=&#x27;cpu&#x27;, identifier=&#x27;my-embedding&#x27;, uuid=&#x27;db4daee6-22fe-43fe-8a57-97ced878ef2a&#x27;, signature=&#x27;*args,**kwargs&#x27;, datatype=DataType(identifier=&#x27;my-vec&#x27;, uuid=&#x27;dbdb8706-10f7-4377-952b-b83b81c6624a&#x27;, encoder=None, decoder=None, info=None, shape=(384,), directory=None, encodable=&#x27;native&#x27;, bytes_encoding=&lt;BytesEncoding.BYTES: &#x27;Bytes&#x27;&gt;, intermediate_type=&#x27;bytes&#x27;, media_type=None), output_schema=None, flatten=False, model_update_kwargs={}, predict_kwargs={&#x27;show_progress_bar&#x27;: True}, compute_kwargs={}, validation=None, metric_values={}, object=SentenceTransformer(
(0): Transformer({&#x27;max_seq_length&#x27;: 256, &#x27;do_lower_case&#x27;: False}) with Transformer model: BertModel
(1): Pooling({&#x27;word_embedding_dimension&#x27;: 384, &#x27;pooling_mode_cls_token&#x27;: False, &#x27;pooling_mode_mean_tokens&#x27;: True, &#x27;pooling_mode_max_tokens&#x27;: False, &#x27;pooling_mode_mean_sqrt_len_tokens&#x27;: False, &#x27;pooling_mode_weightedmean_tokens&#x27;: False, &#x27;pooling_mode_lasttoken&#x27;: False, &#x27;include_prompt&#x27;: True})
(2): Normalize()
), model=&#x27;all-MiniLM-L6-v2&#x27;, preprocess=None, postprocess=Code(identifier=&#x27;&#x27;, uuid=&#x27;cb1d9759-5061-4f39-a91d-e25b959e2a18&#x27;, code=&#x27;from superduperdb import code\n\n@code\ndef postprocess(x):\n    return x.tolist()\n&#x27;)), select=docu.find(), active=True, predict_kwargs={&#x27;max_chunk_size&#x27;: 50}), compatible_listener=None, measure=&#x27;cosine&#x27;, metric_values={}))</p></pre></div></div></details>
<p>Now that we&#x27;ve set up a <code>VectorIndex</code>, we can connect this index with an LLM in a number of ways.
A simple way to do that is with the <code>SequentialModel</code>. The first part of the <code>SequentialModel</code>
executes a query and provides the results to the LLM in the second part.</p>
<p>The <code>RetrievalPrompt</code> component takes a query with a &quot;free&quot; <code>Variable</code> as input.
This gives users great flexibility with regard to how they fetch the context
for their downstream models.</p>
<p>We&#x27;re using OpenAI, but you can use any type of LLm with <code>superduperdb</code>. We have several
native integrations (see <a href="/docs/ai_integraitons/">here</a>) but you can also <a href="/docs/models/bring_your_own_model.md">bring your own model</a>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">llm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prompter </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">variables </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Document</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">components</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SequentialModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> superduperdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">openai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OpenAIChatCompletion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;docu&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">like</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;txt&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Variable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;prompt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vector_index</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;my-index&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;txt&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> r </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prompt_template </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RetrievalPrompt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my-prompt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> select</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> postprocess</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Code</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">get_output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> OpenAIChatCompletion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;gpt-3.5-turbo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;api_key&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[OPENAI-API-KEY]&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">seq </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SequentialModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rag&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> models</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">prompt_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> llm</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seq</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Outputs</summary><div><div class="collapsibleContent_i85q"><pre><p>from superduperdb import code</p><p>@code
def get_output(c):
return [r[&#x27;txt&#x27;] for r in c]</p></pre><pre><p>([],
SequentialModel(identifier=&#x27;rag&#x27;, uuid=&#x27;1c211bfe-00df-4cff-b2a3-7722265150ca&#x27;, signature=&#x27;**kwargs&#x27;, datatype=None, output_schema=None, flatten=False, model_update_kwargs={}, predict_kwargs={}, compute_kwargs={}, validation=None, metric_values={}, models=[RetrievalPrompt(identifier=&#x27;my-prompt&#x27;, uuid=&#x27;e7142d22-e2fc-44de-8c12-5a8b985239bb&#x27;, signature=&#x27;**kwargs&#x27;, datatype=None, output_schema=None, flatten=False, model_update_kwargs={}, predict_kwargs={}, compute_kwargs={}, validation=None, metric_values={}, preprocess=None, postprocess=Code(identifier=&#x27;&#x27;, uuid=&#x27;f49a9d39-693b-4504-852c-6a682bca7e0c&#x27;, code=&quot;from superduperdb import code\n\n@code\ndef get_output(c):\n    return [r[&#x27;txt&#x27;] for r in c]\n&quot;), select=docu.like(documents[0], vector_index=&quot;my-index&quot;, n=5).find().limit(10), prompt_explanation=&quot;HERE ARE SOME FACTS SEPARATED BY &#x27;---&#x27; IN OUR DATA REPOSITORY WHICH WILL HELP YOU ANSWER THE QUESTION.&quot;, prompt_introduction=&#x27;HERE IS THE QUESTION WHICH YOU SHOULD ANSWER BASED ONLY ON THE PREVIOUS FACTS:&#x27;, join=&#x27;\n---\n&#x27;), OpenAIChatCompletion(identifier=&#x27;gpt-3.5-turbo&#x27;, uuid=&#x27;41b0db16-8269-46fa-a6ac-9e56636f68c0&#x27;, signature=&#x27;singleton&#x27;, datatype=None, output_schema=None, flatten=False, model_update_kwargs={}, predict_kwargs={}, compute_kwargs={}, validation=None, metric_values={}, model=&#x27;gpt-3.5-turbo&#x27;, max_batch_size=8, openai_api_key=None, openai_api_base=None, client_kwargs={&#x27;api_key&#x27;: &#x27;[OPENAI-API-KEY]&#x27;}, batch_size=1, prompt=&#x27;&#x27;)]))</p></pre></div></div></details>
<p>Now we can test the <code>SequentialModel</code> with a sample question:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seq</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">predict_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Tell be about vector-indexes?&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Outputs</summary><div><div class="collapsibleContent_i85q"><pre><p>2024-Jun-02 14:31:27.41| INFO     | Duncans-MBP.fritz.box| superduperdb.base.datalayer:1055 | {}</p></pre><pre><p>Batches:   0%|          | 0/1 [00:00&lt;?, ?it/s]</p></pre><pre><p>&#x27;VectorIndexes in SuperDuperDB wrap a Listener so that outputs are searchable. They can take a second Listener for multimodal search and apply to Listener instances containing Model instances that output vectors, arrays, or tensors. They can be leveraged in SuperDuperDB queries with the <code>.like</code> operator. VectorIndexes are set up by applying them to the datalayer <code>db</code>.&#x27;</p></pre></div></div></details></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SuperDuperDB/superduperdb/blob/main/docs/hr/content/tutorials/rag.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/listening"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Listening for new data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/training"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Training and Managing MNIST Predictions with SuperDuperDB</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://superduperdb.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/get-started">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/use-cases">Use cases</a></li><li class="footer__item"><a href="https://blog.superduperdb.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SuperDuperDB/superduperdb" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SuperDuperDB/superduperdb/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SuperDuperDB/superduperdb/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/superduperdb/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://superduperdb.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/superduperdb" target="_blank" rel="noopener noreferrer" class="footer__link-item">X / Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@SuperDuperDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 SuperDuperDB, Inc.</div></div></div></footer></div>
</body>
</html>